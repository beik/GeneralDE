- include: framework
- include: meta
- include: op

- name: dr_cvt_manage
- name: dr_pbuf_cvt
- name: dr_pbuf_len_cvt
- name: dr_store_manage
- name: bpg_metalib

- name: cli-executor-manage
  type: logic_executor_mgr

- name: cli-logic
  type: bpg_rsp_manage
  commit-to: process-client-bind-outgoing
  executor-manage:  cli-executor-manage
  debug: 1

- name: client-meta-lib
  type: dr_store_loader
  load-from-symbol: g_metalib_chat_svr_pro

- name: ChatSvrLogic
  data-meta-name: client-meta-lib
  data-meta-dump: 0
  rsp-manage: cli-logic
  data-meta-validate: 0

- name: client-pkg-manage
  type: bpg_pkg_manage
  debug: 2
  base-cvt: pbuf-len
  data-cvt: pbuf
  meta:
      lib-name: client-meta-lib
      cmd-meta-name:
        - SvrChat_PkgData
      validate: 1
  pkg-debug-infos:
    #default: summary
    default: detail

- name: ClientBindMgr
  type: bpg_bind_manage
  pkg-manage: client-pkg-manage
  incoming-recv-at: process-client-bind-incoming
  #incoming-send-to: 
  outgoing-recv-at: process-client-bind-outgoing
  outgoing-send-to: reply-to-client
  reply-to: notify-to-client
  debug: 1

- name: client-listener
  type: bpg_net_agent
  pkg-manage: client-pkg-manage
  port: 8001
  reply-recv-at: reply-to-client
  debug: 1

